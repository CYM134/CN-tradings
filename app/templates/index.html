{% extends "base.html" %}

{% block title %}é¦–é¡µ - è‚¡ç¥¨åˆ†æç³»ç»Ÿ{% endblock %}

{% block extra_css %}
<style>
    /* ç§»åŠ¨ç«¯é¦–é¡µä¼˜åŒ– */
    @media (max-width: 768px) {
        /* æ¬¢è¿æ¨ªå¹…ç§»åŠ¨ç«¯ä¼˜åŒ– */
        .stock-info .card-body {
            padding: 2rem 1rem;
        }
        
        .stock-info .display-4 {
            font-size: 2rem;
        }
        
        .stock-info .lead {
            font-size: 1rem;
        }
        
        .stock-info p {
            font-size: 0.9rem;
        }
        
        .stock-info .btn {
            margin-bottom: 0.5rem;
            width: 100%;
        }
        
        /* åŠŸèƒ½å¡ç‰‡ç§»åŠ¨ç«¯ä¼˜åŒ– */
        .metric-card .fa-3x {
            font-size: 2rem;
        }
        
        .metric-card .card-title {
            font-size: 1rem;
            margin-bottom: 0.5rem;
        }
        
        .metric-card .card-text {
            font-size: 0.85rem;
            margin-bottom: 1rem;
        }
        
        .metric-card .btn {
            font-size: 0.85rem;
            padding: 0.5rem 1rem;
        }
        
        /* æ•°æ®æ¦‚è§ˆå¡ç‰‡ä¼˜åŒ– */
        .data-overview-card h3 {
            font-size: 1.5rem;
        }
        
        .data-overview-card .card-text {
            font-size: 0.9rem;
        }
        
        /* ç³»ç»Ÿç‰¹æ€§å¡ç‰‡ä¼˜åŒ– */
        .feature-card .card-title {
            font-size: 1rem;
        }
        
        .feature-card .card-text {
            font-size: 0.85rem;
        }
        
        /* æ ‡é¢˜ä¼˜åŒ– */
        h2 {
            font-size: 1.5rem;
            margin-bottom: 1rem;
        }
        
        /* é—´è·ä¼˜åŒ– */
        .mb-4 {
            margin-bottom: 1.5rem !important;
        }
        
        .mb-5 {
            margin-bottom: 2rem !important;
        }
    }
    
    @media (max-width: 576px) {
        .stock-info .card-body {
            padding: 1.5rem 0.75rem;
        }
        
        .stock-info .display-4 {
            font-size: 1.75rem;
        }
        
        .metric-card .fa-3x {
            font-size: 1.75rem;
        }
        
        .metric-card .card-body {
            padding: 1rem 0.75rem;
        }
        
        .data-overview-card h3 {
            font-size: 1.25rem;
        }
        
        h2 {
            font-size: 1.25rem;
        }
    }
    
    /* è§¦æ‘¸ä¼˜åŒ– */
    @media (hover: none) and (pointer: coarse) {
        .metric-card {
            transition: none;
        }
        
        .metric-card:active {
            transform: scale(0.98);
        }
        
        .btn:active {
            transform: scale(0.95);
        }
    }
</style>
{% endblock %}

{% block content %}
<div class="container">
    <!-- æ¬¢è¿æ¨ªå¹… -->
    <div class="row mb-5">
        <div class="col-12">
            <div class="card stock-info-banner border-0 rounded-4 shadow-lg overflow-hidden position-relative animate-fade-in-up">
                <div class="card-body text-center py-5 position-relative z-1">
                    <h1 class="display-4 fw-bold mb-3 ls-tight">è‚¡ç¥¨åˆ†æç³»ç»Ÿ</h1>
                    <p class="lead opacity-75 mb-4">ä¸“ä¸šçº§ Python Flask é‡‘èæ•°æ®é‡åŒ–å¹³å°</p>
                    <div class="d-flex justify-content-center gap-3">
                        <a href="{{ url_for('main.stocks') }}" class="btn btn-light px-4 py-2 fw-semibold rounded-pill shadow-sm">
                            <i class="fas fa-chart-line me-2"></i>å¼€å§‹åˆ†æ
                        </a>
                        <a href="{{ url_for('main.screen') }}" class="btn btn-outline-light px-4 py-2 fw-semibold rounded-pill">
                            <i class="fas fa-filter me-2"></i>é€‰è‚¡ç­›é€‰
                        </a>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- æ ¸å¿ƒåŠŸèƒ½ -->
    <div class="row mb-5">
        <div class="col-12">
            <div class="d-flex align-items-center mb-4">
                <div class="bg-primary rounded-pill p-1 me-2" style="width: 4px; height: 24px;"></div>
                <h3 class="fw-bold m-0">æ ¸å¿ƒåŠŸèƒ½</h3>
            </div>
        </div>

        <!-- è‚¡ç¥¨åˆ—è¡¨ -->
        <div class="col-6 col-md-6 col-lg-3 mb-4">
            <div class="card metric-card-enhanced h-100 border-0 shadow-sm hover-lift-lg transition-all">
                <div class="card-body text-center p-4">
                    <div class="metric-icon bg-blue-50 text-primary rounded-circle mb-3 mx-auto d-flex align-items-center justify-content-center" style="width: 64px; height: 64px;">
                        <i class="fas fa-list-ul fa-lg"></i>
                    </div>
                    <h5 class="fw-bold mb-2">è‚¡ç¥¨åˆ—è¡¨</h5>
                    <p class="text-muted small mb-3">å¤šç»´åº¦ç­›é€‰ä¸æµè§ˆå…¨å¸‚åœºè‚¡ç¥¨ä¿¡æ¯</p>
                    <a href="{{ url_for('main.stocks') }}" class="btn btn-sm btn-link text-decoration-none stretched-link">æŸ¥çœ‹è¯¦æƒ… <i class="fas fa-arrow-right small ms-1"></i></a>
                </div>
            </div>
        </div>

        <!-- æŠ€æœ¯åˆ†æ -->
        <div class="col-6 col-md-6 col-lg-3 mb-4">
            <div class="card metric-card-enhanced h-100 border-0 shadow-sm hover-lift-lg transition-all">
                <div class="card-body text-center p-4">
                    <div class="metric-icon bg-green-50 text-success rounded-circle mb-3 mx-auto d-flex align-items-center justify-content-center" style="width: 64px; height: 64px;">
                        <i class="fas fa-chart-line fa-lg"></i>
                    </div>
                    <h5 class="fw-bold mb-2">æŠ€æœ¯åˆ†æ</h5>
                    <p class="text-muted small mb-3">é›†æˆMACDã€KDJç­‰å¤šç§ä¸“ä¸šæŠ€æœ¯æŒ‡æ ‡</p>
                    <a href="{{ url_for('main.analysis') }}" class="btn btn-sm btn-link text-success text-decoration-none stretched-link">å¼€å§‹åˆ†æ <i class="fas fa-arrow-right small ms-1"></i></a>
                </div>
            </div>
        </div>

        <!-- é€‰è‚¡ç­›é€‰ -->
        <div class="col-6 col-md-6 col-lg-3 mb-4">
            <div class="card metric-card-enhanced h-100 border-0 shadow-sm hover-lift-lg transition-all">
                <div class="card-body text-center p-4">
                    <div class="metric-icon bg-yellow-50 text-warning rounded-circle mb-3 mx-auto d-flex align-items-center justify-content-center" style="width: 64px; height: 64px;">
                        <i class="fas fa-filter fa-lg"></i>
                    </div>
                    <h5 class="fw-bold mb-2">æ™ºèƒ½ç­›é€‰</h5>
                    <p class="text-muted small mb-3">è‡ªå®šä¹‰æ¡ä»¶ç­›é€‰ï¼Œå¿«é€Ÿå®šä½æ½œåŠ›æ ‡çš„</p>
                    <a href="{{ url_for('main.screen') }}" class="btn btn-sm btn-link text-warning text-decoration-none stretched-link">å»ç­›é€‰ <i class="fas fa-arrow-right small ms-1"></i></a>
                </div>
            </div>
        </div>

        <!-- ç­–ç•¥å›æµ‹ -->
        <div class="col-6 col-md-6 col-lg-3 mb-4">
            <div class="card metric-card-enhanced h-100 border-0 shadow-sm hover-lift-lg transition-all">
                <div class="card-body text-center p-4">
                    <div class="metric-icon bg-cyan-50 text-info rounded-circle mb-3 mx-auto d-flex align-items-center justify-content-center" style="width: 64px; height: 64px;">
                        <i class="fas fa-history fa-lg"></i>
                    </div>
                    <h5 class="fw-bold mb-2">ç­–ç•¥å›æµ‹</h5>
                    <p class="text-muted small mb-3">å†å²æ•°æ®å›æµ‹éªŒè¯æŠ•èµ„ç­–ç•¥æœ‰æ•ˆæ€§</p>
                    <a href="{{ url_for('main.backtest') }}" class="btn btn-sm btn-link text-info text-decoration-none stretched-link">å¼€å§‹å›æµ‹ <i class="fas fa-arrow-right small ms-1"></i></a>
                </div>
            </div>
        </div>
    </div>

    <!-- å®æ—¶äº¤æ˜“åˆ†æç³»ç»Ÿ -->
    <div class="row mb-4">
        <div class="col-12">
            <h2 class="mb-4">âš¡ å®æ—¶äº¤æ˜“åˆ†æç³»ç»Ÿ</h2>
        </div>
    </div>

    <div class="row g-3 g-md-4 mb-5">
        <!-- å®æ—¶äº¤æ˜“åˆ†æ -->
        <div class="col-12 col-md-6 col-lg-4">
            <div class="card metric-card-enhanced h-100 hover-lift">
                <div class="card-body text-center">
                    <div class="metric-icon">
                        <i class="fas fa-chart-line text-danger"></i>
                    </div>
                    <h5 class="card-title">å®æ—¶äº¤æ˜“åˆ†æ</h5>
                    <p class="card-text">åˆ†é’Ÿçº§æ•°æ®ç®¡ç†ã€æŠ€æœ¯æŒ‡æ ‡åˆ†æã€äº¤æ˜“ä¿¡å·ç”Ÿæˆå’Œé£é™©ç›‘æ§</p>
                    <a href="/realtime-analysis" class="btn btn-danger-financial">è¿›å…¥åˆ†æ</a>
                </div>
            </div>
        </div>

        <!-- æ•°æ®ç®¡ç† -->
        <div class="col-12 col-md-6 col-lg-4">
            <div class="card metric-card-enhanced h-100 hover-lift">
                <div class="card-body text-center">
                    <div class="metric-icon">
                        <i class="fas fa-database text-primary"></i>
                    </div>
                    <h5 class="card-title">å®æ—¶æ•°æ®ç®¡ç†</h5>
                    <p class="card-text">åˆ†é’Ÿçº§Kçº¿æ•°æ®åŒæ­¥ã€èšåˆå’Œè´¨é‡ç›‘æ§</p>
                    <a href="/realtime-analysis" class="btn btn-primary-financial">æ•°æ®ç®¡ç†</a>
                </div>
            </div>
        </div>

        <!-- æŠ€æœ¯æŒ‡æ ‡ -->
        <div class="col-12 col-md-6 col-lg-4">
            <div class="card metric-card-enhanced h-100 hover-lift">
                <div class="card-body text-center">
                    <div class="metric-icon">
                        <i class="fas fa-chart-bar text-success"></i>
                    </div>
                    <h5 class="card-title">å®æ—¶æŠ€æœ¯æŒ‡æ ‡</h5>
                    <p class="card-text">å¤šå‘¨æœŸæŠ€æœ¯æŒ‡æ ‡è®¡ç®—å’Œé¢„è­¦ç³»ç»Ÿ</p>
                    <a href="/realtime-analysis/indicators" class="btn btn-success-financial">æŠ€æœ¯æŒ‡æ ‡</a>
                </div>
            </div>
        </div>
    </div>

    <!-- æ•°æ®æ¦‚è§ˆ -->
    <div class="row mb-4">
        <div class="col-12">
            <h2 class="mb-4">ğŸ“Š æ•°æ®æ¦‚è§ˆ</h2>
        </div>
    </div>

    <div class="row g-3 g-md-4 mb-5">
        <div class="col-6 col-md-3">
            <div class="card card-financial text-center">
                <div class="card-body">
                    <h3 class="text-primary number-display" id="total-stocks">--</h3>
                    <p class="card-text">è‚¡ç¥¨æ€»æ•°</p>
                </div>
            </div>
        </div>
        <div class="col-6 col-md-3">
            <div class="card card-financial text-center">
                <div class="card-body">
                    <h3 class="text-success number-display" id="total-industries">--</h3>
                    <p class="card-text">è¡Œä¸šæ•°é‡</p>
                </div>
            </div>
        </div>
        <div class="col-6 col-md-3">
            <div class="card card-financial text-center">
                <div class="card-body">
                    <h3 class="text-warning number-display" id="total-areas">--</h3>
                    <p class="card-text">åœ°åŸŸæ•°é‡</p>
                </div>
            </div>
        </div>
        <div class="col-6 col-md-3">
            <div class="card card-financial text-center">
                <div class="card-body">
                    <h3 class="text-info number-display">7</h3>
                    <p class="card-text">æ•°æ®è¡¨</p>
                </div>
            </div>
        </div>
    </div>

    <!-- ç³»ç»Ÿç‰¹æ€§ -->
    <div class="row mb-4">
        <div class="col-12">
            <h2 class="mb-4">âœ¨ ç³»ç»Ÿç‰¹æ€§</h2>
        </div>
    </div>

    <div class="row g-3 g-md-4">
        <div class="col-12 col-md-4">
            <div class="card card-financial h-100">
                <div class="card-body">
                    <h5 class="card-title">ğŸ”„ å®æ—¶æ•°æ®</h5>
                    <p class="card-text">æ”¯æŒæ•°æ®è‡ªåŠ¨æ›´æ–°ï¼Œç¡®ä¿åˆ†æç»“æœçš„æ—¶æ•ˆæ€§</p>
                </div>
            </div>
        </div>
        <div class="col-12 col-md-4">
            <div class="card card-financial h-100">
                <div class="card-body">
                    <h5 class="card-title">ğŸ“ˆ å¤šç»´åˆ†æ</h5>
                    <p class="card-text">åŸºæœ¬é¢ã€æŠ€æœ¯é¢ã€èµ„é‡‘é¢ã€ç­¹ç é¢å…¨æ–¹ä½åˆ†æ</p>
                </div>
            </div>
        </div>
        <div class="col-12 col-md-4">
            <div class="card card-financial h-100">
                <div class="card-body">
                    <h5 class="card-title">ğŸ¯ æ™ºèƒ½ç­›é€‰</h5>
                    <p class="card-text">å¤šæ¡ä»¶ç»„åˆç­›é€‰ï¼Œå¿«é€Ÿå‘ç°æŠ•èµ„æœºä¼š</p>
                </div>
            </div>
        </div>
    </div>
</div>
{% endblock %}

{% block extra_js %}
<script>
// é¡µé¢åŠ è½½å®Œæˆåè·å–ç»Ÿè®¡æ•°æ®
document.addEventListener('DOMContentLoaded', async function() {
    try {
        // è·å–è‚¡ç¥¨æ€»æ•°
        const stocksResponse = await apiRequest('/stocks?page_size=1');
        if (stocksResponse.code === 200) {
            document.getElementById('total-stocks').textContent = stocksResponse.data.total;
        }

        // è·å–è¡Œä¸šæ•°é‡
        const industriesResponse = await apiRequest('/industries');
        if (industriesResponse.code === 200) {
            document.getElementById('total-industries').textContent = industriesResponse.data.length;
        }

        // è·å–åœ°åŸŸæ•°é‡
        const areasResponse = await apiRequest('/areas');
        if (areasResponse.code === 200) {
            document.getElementById('total-areas').textContent = areasResponse.data.length;
        }
    } catch (error) {
        console.error('è·å–ç»Ÿè®¡æ•°æ®å¤±è´¥:', error);
        // ç§»åŠ¨ç«¯å‹å¥½çš„é”™è¯¯æç¤º
        if (typeof MobileUtils !== 'undefined') {
            MobileUtils.showMobileToast('æ•°æ®åŠ è½½å¤±è´¥ï¼Œè¯·åˆ·æ–°é¡µé¢é‡è¯•', 'error');
        }
    }
});
</script>
{% endblock %} 